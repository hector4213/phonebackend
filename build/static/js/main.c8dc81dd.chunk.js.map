{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/personService.js","components/App.js","index.js"],"names":["Filter","handleChange","newSearch","onChange","value","type","PersonForm","addPerson","handleNameChange","newName","handleNumberChange","newNumber","onSubmit","Persons","persons","removePerson","map","person","key","name","number","onClick","id","Notification","message","className","baseUrl","axios","get","then","response","data","newPerson","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","showAll","setShowAll","setNewSearch","setMessage","useEffect","personService","initialPersons","namesToShow","filter","toLowerCase","search","e","target","preventDefault","some","result","window","confirm","matchedPerson","find","personToUpdate","catch","err","setTimeout","returnedPerson","concat","error","console","log","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.c8dc81dd.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({handleChange, newSearch}) => {\n  return (\n    <div>\n      <label>\n        filter shown with:{\" \"}\n        <input onChange={handleChange} value={newSearch} type=\"text\" />\n      </label>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react'\n\nconst PersonForm = ({addPerson, handleNameChange, newName, handleNumberChange, newNumber}) => {\n    return (\n        <form onSubmit={addPerson}>\n          <div>\n            <label>\n              Name:\n              <input onChange={handleNameChange} value={newName} type=\"text\" />\n            </label>\n            <div>\n              <label>\n                Number:\n                <input\n                  onChange={handleNumberChange}\n                  value={newNumber}\n                  type=\"text\"\n                />\n              </label>\n            </div>\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n    )\n}\n\nexport default PersonForm\n","import React from \"react\";\n\nconst Persons = ({ persons, removePerson }) => {\n  return (\n    <div>\n      {persons.map((person) => (\n        <p key={person.name}>\n          {person.name} {person.number}\n          <button onClick={() => removePerson(person.id, person.name)}>delete</button>\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from 'react'\n\nimport './notification.css'\n\nconst Notification = ({message}) => {\nif(message === null){\n    return null\n}\n\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default Notification\n","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAllPersons = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst createPerson = (newPerson) => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst updatePerson = (id, newPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\nexport default {\n    getAllPersons,\n    createPerson,\n    updatePerson,\n    deletePerson\n}","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\n\nimport personService from \"../services/personService\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [showAll, setShowAll] = useState(true);\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAllPersons().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const namesToShow = showAll\n    ? persons\n    : persons.filter(\n        (person) =>\n          person.name.toLowerCase().search(newSearch.toLowerCase()) !== -1\n      );\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleNameSearch = (e) => {\n    setNewSearch(e.target.value);\n    if (e.target.value) {\n      setShowAll(false);\n    } else {\n      setShowAll(true);\n    }\n  };\n\n  const removePerson = (id, person) => {\n    const wannaDelete = window.confirm(`Delete ${person} ?`);\n    if (wannaDelete) {\n      personService\n        .deletePerson(id)\n        .then(() => setPersons(persons.filter((person) => person.id !== id)))\n        .catch((err) => {\n          setMessage(`${person} has already been deleted from server`);\n          setTimeout(() => setMessage(null), 2000);\n          setPersons(persons.filter((person) => person.id !== id));\n        });\n    } else {\n      return;\n    }\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    if (\n      persons.some(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      )\n    ) {\n      const result = window.confirm(\n        `${newName} has already been added to the phonebook, replace old number with new number?`\n      );\n      if (result) {\n        const matchedPerson = persons.find(\n          (person) => person.name.toLowerCase() === newName.toLowerCase()\n        );\n        const personToUpdate = { ...matchedPerson, number: newPerson.number };\n        personService\n          .updatePerson(matchedPerson.id, personToUpdate)\n          .then(() =>\n            setPersons(\n              persons.map((person) =>\n                person.id !== matchedPerson.id ? person : personToUpdate\n              )\n            )\n          )\n          .catch((err) => {\n            setMessage(\n              `${matchedPerson.name} has already been removed from server`\n            );\n            setTimeout(() => setMessage(null), 2000);\n            setPersons(\n              persons.filter((person) => person.id !== matchedPerson.id)\n            );\n          });\n        setNewName(\"\");\n        setNewNumber(\"\");\n      } else if (!result) {\n        setNewName(\"\");\n        setNewNumber(\"\");\n      }\n    } else {\n      personService.createPerson(newPerson).then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setMessage(`${returnedPerson.name} was added!`);\n        setTimeout(() => setMessage(null), 2000);\n      })\n      .catch(error => {\n        console.log(error.response)\n        setMessage(error.response.data.error)\n        setTimeout(()=> setMessage(null), 4000)\n      })\n    }\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n      <div>\n        <Filter handleChange={handleNameSearch} newSearch={newSearch} />\n      </div>\n      <div>\n        <h1>Add a new</h1>\n        <PersonForm\n          addPerson={addPerson}\n          handleNameChange={handleNameChange}\n          newName={newName}\n          handleNumberChange={handleNumberChange}\n          newNumber={newNumber}\n        />\n      </div>\n      <h2>Numbers</h2>\n      <Persons persons={namesToShow} removePerson={removePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App'\n\nReactDOM.render(\n    <App/>,\n    document.querySelector('#root')\n)"],"sourceRoot":""}